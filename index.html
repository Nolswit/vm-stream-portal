<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>VM Access Portal</title>
</head>
<body>

  <h1>VM Access Portal</h1>

  <p id="serviceStatus">Service status: checking...</p>

  <input type="text" id="key" placeholder="Enter access key" />
  <button onclick="submitKey()">Connect</button>

  <p id="status"></p>

  <script>
    // Update this with your deployed backend API URL
    const API_URL = "https://YOUR_API_URL_HERE";

    // Frontend state
    let SERVICE_ENABLED = true; // fallback, real toggle comes from backend later

    // Update service status on page load
    document.getElementById("serviceStatus").innerText =
      SERVICE_ENABLED ? "Service status: online" : "Service status: offline";

    function submitKey() {
      const key = document.getElementById("key").value.trim();
      const status = document.getElementById("status");

      if (!key) {
        status.innerText = "Please enter an access key.";
        return;
      }

      status.innerText = "Checking key...";

      fetch(`${API_URL}/check-key`, {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify({ key })
      })
      .then(res => res.json())
      .then(data => {
        status.innerText = data.message || "Unknown response";
      })
      .catch(err => {
        console.error(err);
        status.innerText = "Error connecting to API.";
      });
    }
  </script>

</body>
</html>
